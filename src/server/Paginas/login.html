<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Login</title>
</head>
<script>
var xmlhttp = new XMLHttpRequest();
var responseGet;
var xmlhttp2 = new XMLHttpRequest();
var responseGet2;

xmlhttp.onreadystatechange=function() {
	if (xmlhttp.readyState==4 && xmlhttp.status==200) {
		alert(xmlhttp.responseText);
	}
}

xmlhttp2.onreadystatechange=function() {
	if (xmlhttp2.readyState==4 && xmlhttp2.status==200) {
		var autenthication = xmlhttp2.responseText;
		alert(autenthication);
		if (autenthication == "Ok!"){
			window.location = "http://localhost:9000/menu";
		}else{
			alert("Informações incorretas");
		}
	}
}


function sendHttpGetUsers(){
	xmlhttp2.open("GET", "http://localhost:9000/checkLogin", false);
	xmlhttp2.send();
	}


function checaLogin(){
	var nome = document.getElementById('login');
	alert(nome.value);
	xmlhttp.open("POST", "http://localhost:9000/checkLogin?name=" + nome.value, true); //Valor "Bruno" sera pegado do campo onde foi digitado o nome do user
	xmlhttp.send();
	sendHttpGetUsers();
}






</script>

<body>
	<div align="center" class="margemImg"><img src="home.png" width="200" height="170"></div>
	
	<div align="center"><h1>Home Automation</h1> </div>
	
	<div align="center" class="margem">
		
		<table>	
			<tr>
				<td align="right">Login:</td>
				<td align="left"> <input id="login" type="text" name="login" size="60"/></td>
			</tr>
			
			<tr>
				<td align="right">Password:</td>
				<td align="left"><input type="password" name="pwd" size="60"/></td>
			</tr>
			
			
		</table>
	</div>
	
	<div align="center" class="margem">
		<input  type="button" value="post data" onclick="javascript:checaLogin()">
	</div>

</body>

<style>

	.margem{
		margin-top: 50px;
	}
	
	.margemImg{
		margin-top:100px;
	}


</style>
</html>
